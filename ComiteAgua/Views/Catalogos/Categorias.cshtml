@model ComiteAgua.ViewModels.Catalogos.CategoriasViewModel
@{
    ViewBag.Title = "Categorias";
}
<br />
@*Breadcrumb*@
<nav aria-label="breadcrumb" role="navigation">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="@Url.Action("Index", "Home")">Inicio</a></li>
        <li class="breadcrumb-item active" aria-current="page"><a>Recibos</a></li>
    </ol>
</nav>

<div class="col-md-6 mr-auto ml-auto">
    @using (Html.BeginForm(null,null, FormMethod.Post, new { role = "form" }))
    {
        <div class="card">
            <div class="card-body">                
                @*MES ANO*@
                <div class="form-group row">
                    @Html.LabelFor(x => x.MesAnoFiltro, new { @for = "FechaFiltro", @class = "col-md-2 col-form-label offset-md-2" })
                    <div class="col-sm-6">
                        @Html.TextBoxFor(d => d.MesAnoFiltro, new { @class = "form-control", @type = "number" })
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="row">
                    <div class="offset-md-3 col-2 text-center">
                        <button id="BuscarButton" type="submit" formaction="ConsultarCategoria" class="btn btn-success">Buscar</button>
                    </div>
                    <div class="offset-md-2 col-2 text-center">
                        <button id="LimpiarButton" type="submit" formaction="Limpiar" class="btn btn-primary">Limpiar</button>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<br />

@if (Model.Tarifas.Count > 0)
{
    <table id="categorias" class="table table-hover table-bordered table-sm" style="width:100%">
        <thead class="thead-dark text-center">
        <tr>
            <th scope="col">Categoría</th>
            <th scope="col">Abreviatura</th>
            <th scope="col">Año</th>
            <th scope="col">Costo</th>
            <th scope="col">Editar</th> 
            <th scope="col">Tarifa</th> 
            <th scope="col">Detalle</th> 
        </tr>
        </thead>
        <tbody>

        @foreach (var item in Model.Tarifas)
        {
            <tr class="text-center">
                <td scope="row">@item.Categoria.Nombre</td>
                <td>@item.Categoria.Abreviatura</td>
                <td>@item.MesAno</td>
                <td>@item.CostoTarifa.ToString("C")</td>
                <td><a href="@Url.Action("EditAddCategoria", "Catalogos", new { tarifaId = item.TarifaId, mesAnoFiltro = Model.MesAnoFiltro, urlRetorno = Url.Action("ConsultarCategoria", "Catalogos",new{ mesAnoFiltro = Model.MesAnoFiltro }) })" title="Editar"><span class="fas fa-pencil-alt fa-1x azul"></span></a></td>
                <td><a href="@Url.Action("EditAddTarifa", "Catalogos", new { categoriaId = item.CategoriaId, mesAnoFiltro = Model.MesAnoFiltro, urlRetorno = Url.Action("ConsultarCategoria", "Catalogos",new{ mesAnoFiltro = Model.MesAnoFiltro }) })" title="Agregar Tarifa"><span class="fas fa-money-bill-alt fa-1x verde"></span></a></td>
                <td><a href="@Url.Action("DetalleCategoria", "Catalogos", new { categoriaId = item.CategoriaId, mesAnoFiltro = Model.MesAnoFiltro, urlRetorno = Url.Action("ConsultarCategoria", "Catalogos",new{ mesAnoFiltro = Model.MesAnoFiltro }) })" title="Ver"><span class="far fa-eye fa-1x azul"></span></a></td>                
            </tr>
        }

        </tbody>
        <tfoot class="text-center">
        <tr>
            <th scope="col">Categoría</th>
            <th scope="col">Abreviatura</th>
            <th scope="col">Año</th>
            <th scope="col">Costo</th>
            <th scope="col">Editar</th> 
            <th scope="col">Tarifa</th> 
            <th scope="col">Detalle</th> 
        </tr>
        </tfoot>
    </table>
}
else
{
    <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
        <strong>Alerta!</strong> No se encontraron registros.
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}

@section scripts
{
    <script>
        $(document).ready(function () {
            $('#categorias').DataTable();
        });
    </script>
}
